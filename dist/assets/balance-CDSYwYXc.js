import{a as r,j as e}from"./index-DSdF_8M_.js";import{C as H,a as W}from"./CCardBody-BViMqAMN.js";import{C as w}from"./CCardHeader-CHF9S75-.js";import{a as u}from"./CButton-BjMrz52_.js";import{C as j}from"./CFormSelect-D_w2R_Sd.js";import{C as V,a as B}from"./CInputGroupText-DS5TEAvR.js";import{a as t,C as q}from"./CFormInput-2li5QlXf.js";import{C as c}from"./cil-people-krF7It8S.js";import{C as z,a as $,b as C,c as n,d as G,e as a}from"./CTable-Dgqh94m4.js";import{C as O,a as L,b as P,c as J}from"./CModalHeader-DDDsM_3D.js";import"./DefaultLayout-CeamR_9I.js";import"./index.esm-C4RaOWCk.js";const K=[{id:1,fecha:"2025-07-01",tipo_movimiento:"Ingreso",monto:2500,descripcion:"Venta de papa negra",referencia_id:1,tipo_referencia:"Venta"},{id:2,fecha:"2025-07-02",tipo_movimiento:"Egreso",monto:1200,descripcion:"Compra de fertilizante",referencia_id:1,tipo_referencia:"Compra"},{id:3,fecha:"2025-07-03",tipo_movimiento:"Egreso",monto:800,descripcion:"Pago de salario",referencia_id:2,tipo_referencia:"Salario"}],Q={Ingreso:"success",Egreso:"danger"},D=["Venta","Compra","Salario","Otro"],le=()=>{const[g,v]=r.useState([]),[S,d]=r.useState(!1),[s,b]=r.useState({fecha:"",tipo_movimiento:"Ingreso",monto:"",descripcion:"",referencia_id:"",tipo_referencia:"Venta"}),[m,y]=r.useState(""),[h,_]=r.useState(""),[p,F]=r.useState(""),[x,E]=r.useState("");r.useEffect(()=>{v(K)},[]);const i=o=>{b({...s,[o.target.name]:o.target.value})},R=o=>{o.preventDefault(),v([...g,{id:g.length+1,...s,monto:parseFloat(s.monto)}]),d(!1),b({fecha:"",tipo_movimiento:"Ingreso",monto:"",descripcion:"",referencia_id:"",tipo_referencia:"Venta"})},f=g.filter(o=>{const l=m?o.tipo_movimiento===m:!0,M=h?o.tipo_referencia===h:!0,k=p?o.fecha>=p:!0,A=x?o.fecha<=x:!0;return l&&M&&k&&A}),I=f.filter(o=>o.tipo_movimiento==="Ingreso").reduce((o,l)=>o+l.monto,0),N=f.filter(o=>o.tipo_movimiento==="Egreso").reduce((o,l)=>o+l.monto,0),T=I-N;return e.jsxs(H,{style:{background:"linear-gradient(135deg, #E6EBE0 60%, #F4F1BB 100%)",border:"none",boxShadow:"0 2px 16px 0 #ED6A5A33"},children:[e.jsxs(w,{className:"d-flex justify-content-between align-items-center",style:{background:"#36C9C6",color:"#fff"},children:[e.jsx("h5",{className:"mb-0",style:{letterSpacing:1},children:"Balance de Ingresos y Egresos"}),e.jsx(u,{color:"light",style:{color:"#36C9C6",fontWeight:"bold"},onClick:()=>d(!0),children:"+ Nuevo Movimiento"})]}),e.jsxs(W,{children:[e.jsxs("div",{className:"mb-4 d-flex flex-wrap gap-3 align-items-end",style:{background:"#F4F1BB",borderRadius:8,padding:16},children:[e.jsxs(j,{size:"sm",style:{maxWidth:150},label:"Tipo",value:m,onChange:o=>y(o.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{children:"Ingreso"}),e.jsx("option",{children:"Egreso"})]}),e.jsxs(j,{size:"sm",style:{maxWidth:150},label:"Referencia",value:h,onChange:o=>_(o.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),D.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsxs(V,{size:"sm",style:{maxWidth:260},children:[e.jsx(B,{children:"Desde"}),e.jsx(t,{type:"date",value:p,onChange:o=>F(o.target.value)}),e.jsx(B,{children:"Hasta"}),e.jsx(t,{type:"date",value:x,onChange:o=>E(o.target.value)})]}),(m||h||p||x)&&e.jsx(u,{color:"secondary",size:"sm",variant:"outline",onClick:()=>{y(""),_(""),F(""),E("")},children:"Limpiar filtros"})]}),e.jsxs("div",{className:"mb-3 d-flex flex-wrap gap-4 justify-content-end",children:[e.jsxs("div",{children:[e.jsx(c,{color:"success",className:"me-2",children:"Ingresos"}),e.jsxs("span",{style:{fontWeight:600,color:"#36C9C6"},children:["$",I.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(c,{color:"danger",className:"me-2",children:"Egresos"}),e.jsxs("span",{style:{fontWeight:600,color:"#ED6A5A"},children:["$",N.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(c,{color:"info",className:"me-2",children:"Balance"}),e.jsxs("span",{style:{fontWeight:700,color:T>=0?"#36C9C6":"#ED6A5A"},children:["$",T.toFixed(2)]})]})]}),e.jsxs(z,{hover:!0,responsive:!0,bordered:!0,align:"middle",className:"shadow-sm",style:{background:"#fff",borderRadius:8},children:[e.jsx($,{color:"light",children:e.jsxs(C,{children:[e.jsx(n,{children:"#"}),e.jsx(n,{children:"Fecha"}),e.jsx(n,{children:"Tipo"}),e.jsx(n,{children:"Monto"}),e.jsx(n,{children:"Descripción"}),e.jsx(n,{children:"Referencia"}),e.jsx(n,{children:"ID Ref."})]})}),e.jsxs(G,{children:[f.length===0&&e.jsx(C,{children:e.jsx(a,{colSpan:7,className:"text-center text-muted",children:"No hay movimientos registrados con los filtros seleccionados."})}),f.map(o=>e.jsxs(C,{children:[e.jsx(a,{children:o.id}),e.jsx(a,{children:e.jsx("span",{style:{fontFamily:"monospace",color:"#6c757d"},children:o.fecha})}),e.jsx(a,{children:e.jsx(c,{color:Q[o.tipo_movimiento]||"secondary",children:o.tipo_movimiento})}),e.jsx(a,{children:e.jsxs("span",{style:{color:o.tipo_movimiento==="Ingreso"?"#36C9C6":"#ED6A5A",fontWeight:600},children:["$",o.monto.toFixed(2)]})}),e.jsx(a,{children:e.jsx("span",{style:{color:"#222"},children:o.descripcion})}),e.jsx(a,{children:e.jsx(c,{color:"info",children:o.tipo_referencia})}),e.jsx(a,{children:e.jsx("span",{style:{color:"#222"},children:o.referencia_id})})]},o.id))]})]})]}),e.jsxs(O,{visible:S,onClose:()=>d(!1),children:[e.jsx(L,{style:{background:"#36C9C6",color:"#fff"},children:e.jsx("strong",{children:"Nuevo Movimiento"})}),e.jsxs(q,{onSubmit:R,children:[e.jsxs(P,{children:[e.jsx(t,{type:"date",label:"Fecha",name:"fecha",value:s.fecha,onChange:i,required:!0}),e.jsxs(j,{className:"mt-2",label:"Tipo de movimiento",name:"tipo_movimiento",value:s.tipo_movimiento,onChange:i,required:!0,children:[e.jsx("option",{children:"Ingreso"}),e.jsx("option",{children:"Egreso"})]}),e.jsx(t,{className:"mt-2",type:"number",step:"0.01",label:"Monto",name:"monto",value:s.monto,onChange:i,required:!0}),e.jsx(t,{className:"mt-2",label:"Descripción",name:"descripcion",value:s.descripcion,onChange:i,required:!0}),e.jsx(t,{className:"mt-2",type:"number",label:"ID de referencia",name:"referencia_id",value:s.referencia_id,onChange:i}),e.jsx(j,{className:"mt-2",label:"Tipo de referencia",name:"tipo_referencia",value:s.tipo_referencia,onChange:i,required:!0,children:D.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs(J,{children:[e.jsx(u,{color:"secondary",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(u,{color:"primary",type:"submit",children:"Guardar"})]})]})]})]})};export{le as default};
