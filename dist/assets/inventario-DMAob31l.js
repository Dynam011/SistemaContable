import{a as t,j as e}from"./index-DSdF_8M_.js";import{C as k,a as D}from"./CCardBody-BViMqAMN.js";import{C as H}from"./CCardHeader-CHF9S75-.js";import{a as u}from"./CButton-BjMrz52_.js";import{C as F}from"./CFormSelect-D_w2R_Sd.js";import{C as T,a as z}from"./CInputGroupText-DS5TEAvR.js";import{a as h,C as E}from"./CFormInput-2li5QlXf.js";import{C as M,a as R,b as f,c as p,d as w,e as i}from"./CTable-Dgqh94m4.js";import{C as A}from"./cil-people-krF7It8S.js";import{C as W,a as q,b as G,c as L}from"./CModalHeader-DDDsM_3D.js";import"./DefaultLayout-CeamR_9I.js";import"./index.esm-C4RaOWCk.js";const V=[{id:1,nombre:"Papa Negra"},{id:2,nombre:"Papa Blanca"},{id:3,nombre:"Papa Criolla"}],J=[{id:1,producto_id:1,producto:"Papa Negra",cantidad_disponible:1200,fecha_ultima_actualizacion:"2025-07-07 09:00"},{id:2,producto_id:2,producto:"Papa Blanca",cantidad_disponible:800,fecha_ultima_actualizacion:"2025-07-06 16:30"}],ie=()=>{const[m,b]=t.useState([]),[x,B]=t.useState([]),[S,r]=t.useState(!1),[o,j]=t.useState({producto_id:"",cantidad_disponible:"",fecha_ultima_actualizacion:""}),[s,g]=t.useState(""),[n,_]=t.useState(""),[l,v]=t.useState("");t.useEffect(()=>{b(J),B(V)},[]);const C=a=>{j({...o,[a.target.name]:a.target.value})},I=a=>{a.preventDefault();const c=x.find(d=>d.id===parseInt(o.producto_id));b([...m,{id:m.length+1,producto_id:parseInt(o.producto_id),producto:c?c.nombre:"",cantidad_disponible:parseInt(o.cantidad_disponible),fecha_ultima_actualizacion:o.fecha_ultima_actualizacion}]),r(!1),j({producto_id:"",cantidad_disponible:"",fecha_ultima_actualizacion:""})},y=m.filter(a=>{const c=s?a.producto_id===parseInt(s):!0,d=a.fecha_ultima_actualizacion.slice(0,10),N=n?d>=n:!0,P=l?d<=l:!0;return c&&N&&P});return e.jsxs(k,{style:{background:"linear-gradient(135deg, #F4F1BB 60%, #9BC1BC 100%)",border:"none",boxShadow:"0 2px 16px 0 #9BC1BC33"},children:[e.jsxs(H,{className:"d-flex justify-content-between align-items-center",style:{background:"#36C9C6",color:"#fff"},children:[e.jsx("h5",{className:"mb-0",style:{letterSpacing:1},children:"Inventario"}),e.jsx(u,{color:"light",style:{color:"#36C9C6",fontWeight:"bold"},onClick:()=>r(!0),children:"+ Nuevo Registro"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"mb-4 d-flex flex-wrap gap-2 align-items-end",style:{background:"#E6EBE0",borderRadius:8,padding:12},children:[e.jsxs(F,{size:"sm",style:{maxWidth:200},label:"Producto",value:s,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"",children:"Todos los productos"}),x.map(a=>e.jsx("option",{value:a.id,children:a.nombre},a.id))]}),e.jsxs(T,{size:"sm",style:{maxWidth:500},children:[e.jsx(z,{children:"Desde"}),e.jsx(h,{type:"date",value:n,onChange:a=>_(a.target.value)}),e.jsx(z,{children:"Hasta"}),e.jsx(h,{type:"date",value:l,onChange:a=>v(a.target.value)})]}),(s||n||l)&&e.jsx(u,{color:"secondary",size:"sm",variant:"outline",onClick:()=>{g(""),_(""),v("")},children:"Limpiar filtros"})]}),e.jsxs(M,{hover:!0,responsive:!0,bordered:!0,align:"middle",className:"shadow-sm",style:{background:"#fff",borderRadius:8},children:[e.jsx(R,{color:"light",children:e.jsxs(f,{children:[e.jsx(p,{children:"#"}),e.jsx(p,{children:"Producto"}),e.jsx(p,{children:"Cantidad Disponible"}),e.jsx(p,{children:"Última Actualización"})]})}),e.jsxs(w,{children:[y.length===0&&e.jsx(f,{children:e.jsx(i,{colSpan:4,className:"text-center text-muted",children:"No hay registros de inventario con los filtros seleccionados."})}),y.map(a=>e.jsxs(f,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:e.jsx(A,{color:"info",style:{fontSize:13,background:"#ED6A5A",color:"#fff"},children:a.producto})}),e.jsx(i,{children:e.jsx("span",{style:{color:"#36C9C6",fontWeight:600},children:a.cantidad_disponible})}),e.jsx(i,{children:e.jsx("span",{style:{fontFamily:"monospace",color:"#6c757d"},children:a.fecha_ultima_actualizacion})})]},a.id))]})]})]}),e.jsxs(W,{visible:S,onClose:()=>r(!1),children:[e.jsx(q,{style:{background:"#36C9C6",color:"#fff"},children:e.jsx("strong",{children:"Nuevo Registro de Inventario"})}),e.jsxs(E,{onSubmit:I,children:[e.jsxs(G,{children:[e.jsxs(F,{label:"Producto",name:"producto_id",value:o.producto_id,onChange:C,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione producto"}),x.map(a=>e.jsx("option",{value:a.id,children:a.nombre},a.id))]}),e.jsx(h,{className:"mt-2",type:"number",min:0,label:"Cantidad disponible",name:"cantidad_disponible",value:o.cantidad_disponible,onChange:C,required:!0}),e.jsx(h,{className:"mt-2",type:"datetime-local",label:"Fecha de última actualización",name:"fecha_ultima_actualizacion",value:o.fecha_ultima_actualizacion,onChange:C,required:!0})]}),e.jsxs(L,{children:[e.jsx(u,{color:"secondary",onClick:()=>r(!1),children:"Cancelar"}),e.jsx(u,{color:"primary",type:"submit",children:"Guardar"})]})]})]})]})};export{ie as default};
