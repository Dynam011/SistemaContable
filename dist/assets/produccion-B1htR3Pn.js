import{a as o,j as e}from"./index-DSdF_8M_.js";import{C as J,a as L}from"./CCardBody-BViMqAMN.js";import{C as V}from"./CCardHeader-CHF9S75-.js";import{a as j}from"./CButton-BjMrz52_.js";import{C as f}from"./CFormSelect-D_w2R_Sd.js";import{C as B,a as C}from"./CInputGroupText-DS5TEAvR.js";import{a as r,C as $}from"./CFormInput-2li5QlXf.js";import{C as K,a as O,b as F,c as t,d as Q,e as c}from"./CTable-Dgqh94m4.js";import{C as I}from"./cil-people-krF7It8S.js";import{C as U,a as X,b as Y,c as Z}from"./CModalHeader-DDDsM_3D.js";import"./DefaultLayout-CeamR_9I.js";import"./index.esm-C4RaOWCk.js";const ee=[{id:1,nombre:"Papa Negra"},{id:2,nombre:"Papa Blanca"},{id:3,nombre:"Papa Criolla"}],ae=[{id:1,nombre_empleado:"Juan Pérez"},{id:2,nombre_empleado:"Ana Gómez"}],se=[{id:1,producto_id:1,producto:"Papa Negra",fecha_siembra:"2025-05-01",fecha_cosecha:"2025-08-01",cantidad_esperada:2e3,cantidad_cosechada:1950,area_cultivo:3.5,costo_produccion:12e3,responsable_id:1,responsable:"Juan Pérez"},{id:2,producto_id:2,producto:"Papa Blanca",fecha_siembra:"2025-06-10",fecha_cosecha:"2025-09-10",cantidad_esperada:1500,cantidad_cosechada:0,area_cultivo:2.2,costo_produccion:9e3,responsable_id:2,responsable:"Ana Gómez"}],be=()=>{const[g,S]=o.useState([]),[v,R]=o.useState([]),[y,T]=o.useState([]),[W,l]=o.useState(!1),[s,P]=o.useState({producto_id:"",fecha_siembra:"",fecha_cosecha:"",cantidad_esperada:"",cantidad_cosechada:"",area_cultivo:"",costo_produccion:"",responsable_id:""}),[i,N]=o.useState(""),[h,D]=o.useState(""),[u,A]=o.useState(""),[p,k]=o.useState(""),[m,E]=o.useState(""),[b,H]=o.useState("");o.useEffect(()=>{S(se),R(ee),T(ae)},[]);const d=a=>{P({...s,[a.target.name]:a.target.value})},q=a=>{a.preventDefault();const x=v.find(n=>n.id===parseInt(s.producto_id)),_=y.find(n=>n.id===parseInt(s.responsable_id));S([...g,{id:g.length+1,producto_id:parseInt(s.producto_id),producto:x?x.nombre:"",fecha_siembra:s.fecha_siembra,fecha_cosecha:s.fecha_cosecha,cantidad_esperada:parseFloat(s.cantidad_esperada),cantidad_cosechada:parseFloat(s.cantidad_cosechada),area_cultivo:parseFloat(s.area_cultivo),costo_produccion:parseFloat(s.costo_produccion),responsable_id:parseInt(s.responsable_id),responsable:_?_.nombre_empleado:""}]),l(!1),P({producto_id:"",fecha_siembra:"",fecha_cosecha:"",cantidad_esperada:"",cantidad_cosechada:"",area_cultivo:"",costo_produccion:"",responsable_id:""})},z=g.filter(a=>{const x=i?a.producto_id===parseInt(i):!0,_=h?a.responsable_id===parseInt(h):!0,n=u?a.fecha_siembra>=u:!0,M=p?a.fecha_siembra<=p:!0,w=m?a.fecha_cosecha>=m:!0,G=b?a.fecha_cosecha<=b:!0;return x&&_&&n&&M&&w&&G});return e.jsxs(J,{style:{background:"linear-gradient(135deg, #F4F1BB 60%, #36C9C6 100%)",border:"none",boxShadow:"0 2px 16px 0 #36C9C633"},children:[e.jsxs(V,{className:"d-flex justify-content-between align-items-center",style:{background:"#ED6A5A",color:"#fff"},children:[e.jsx("h5",{className:"mb-0",style:{letterSpacing:1},children:"Producción"}),e.jsx(j,{color:"light",style:{color:"#ED6A5A",fontWeight:"bold"},onClick:()=>l(!0),children:"+ Nueva Producción"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"mb-4 d-flex flex-wrap gap-3 align-items-end",style:{background:"#E6EBE0",borderRadius:8,padding:16},children:[e.jsxs(f,{size:"sm",style:{maxWidth:180},label:"Producto",value:i,onChange:a=>N(a.target.value),children:[e.jsx("option",{value:"",children:"Todos los productos"}),v.map(a=>e.jsx("option",{value:a.id,children:a.nombre},a.id))]}),e.jsxs(f,{size:"sm",style:{maxWidth:180},label:"Responsable",value:h,onChange:a=>D(a.target.value),children:[e.jsx("option",{value:"",children:"Todos los responsables"}),y.map(a=>e.jsx("option",{value:a.id,children:a.nombre_empleado},a.id))]}),e.jsxs(B,{size:"sm",style:{maxWidth:320},children:[e.jsx(C,{children:"Siembra Desde"}),e.jsx(r,{type:"date",value:u,onChange:a=>A(a.target.value)}),e.jsx(C,{children:"Hasta"}),e.jsx(r,{type:"date",value:p,onChange:a=>k(a.target.value)})]}),e.jsxs(B,{size:"sm",style:{maxWidth:320},children:[e.jsx(C,{children:"Cosecha Desde"}),e.jsx(r,{type:"date",value:m,onChange:a=>E(a.target.value)}),e.jsx(C,{children:"Hasta"}),e.jsx(r,{type:"date",value:b,onChange:a=>H(a.target.value)})]}),(i||h||u||p||m||b)&&e.jsx(j,{color:"secondary",size:"sm",variant:"outline",onClick:()=>{N(""),D(""),A(""),k(""),E(""),H("")},children:"Limpiar filtros"})]}),e.jsxs(K,{hover:!0,responsive:!0,bordered:!0,align:"middle",className:"shadow-sm",style:{background:"#fff",borderRadius:8},children:[e.jsx(O,{color:"light",children:e.jsxs(F,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Producto"}),e.jsx(t,{children:"Siembra"}),e.jsx(t,{children:"Cosecha"}),e.jsx(t,{children:"Cant. Esperada"}),e.jsx(t,{children:"Cant. Cosechada"}),e.jsx(t,{children:"Área (ha)"}),e.jsx(t,{children:"Costo"}),e.jsx(t,{children:"Responsable"})]})}),e.jsxs(Q,{children:[z.length===0&&e.jsx(F,{children:e.jsx(c,{colSpan:9,className:"text-center text-muted",children:"No hay registros de producción con los filtros seleccionados."})}),z.map(a=>e.jsxs(F,{children:[e.jsx(c,{children:a.id}),e.jsx(c,{children:e.jsx(I,{color:"info",style:{fontSize:13,background:"#36C9C6",color:"#fff"},children:a.producto})}),e.jsx(c,{children:e.jsx("span",{style:{fontFamily:"monospace",color:"#6c757d"},children:a.fecha_siembra})}),e.jsx(c,{children:e.jsx("span",{style:{fontFamily:"monospace",color:"#6c757d"},children:a.fecha_cosecha})}),e.jsx(c,{children:e.jsx("span",{style:{color:"#222",fontWeight:600},children:a.cantidad_esperada})}),e.jsx(c,{children:e.jsx("span",{style:{color:"#36C9C6",fontWeight:600},children:a.cantidad_cosechada})}),e.jsx(c,{children:e.jsx("span",{style:{color:"#ED6A5A",fontWeight:600},children:a.area_cultivo})}),e.jsx(c,{children:e.jsxs("span",{style:{color:"#ED6A5A",fontWeight:600},children:["$",a.costo_produccion.toFixed(2)]})}),e.jsx(c,{children:e.jsx(I,{color:"secondary",style:{fontSize:13},children:a.responsable})})]},a.id))]})]})]}),e.jsxs(U,{visible:W,onClose:()=>l(!1),children:[e.jsx(X,{style:{background:"#ED6A5A",color:"#fff"},children:e.jsx("strong",{children:"Nueva Producción"})}),e.jsxs($,{onSubmit:q,children:[e.jsxs(Y,{children:[e.jsxs(f,{label:"Producto",name:"producto_id",value:s.producto_id,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione producto"}),v.map(a=>e.jsx("option",{value:a.id,children:a.nombre},a.id))]}),e.jsx(r,{className:"mt-2",type:"date",label:"Fecha de siembra",name:"fecha_siembra",value:s.fecha_siembra,onChange:d,required:!0}),e.jsx(r,{className:"mt-2",type:"date",label:"Fecha de cosecha",name:"fecha_cosecha",value:s.fecha_cosecha,onChange:d,required:!0}),e.jsx(r,{className:"mt-2",type:"number",step:"0.01",label:"Cantidad esperada",name:"cantidad_esperada",value:s.cantidad_esperada,onChange:d,required:!0}),e.jsx(r,{className:"mt-2",type:"number",step:"0.01",label:"Cantidad cosechada",name:"cantidad_cosechada",value:s.cantidad_cosechada,onChange:d}),e.jsx(r,{className:"mt-2",type:"number",step:"0.01",label:"Área de cultivo (ha)",name:"area_cultivo",value:s.area_cultivo,onChange:d,required:!0}),e.jsx(r,{className:"mt-2",type:"number",step:"0.01",label:"Costo de producción",name:"costo_produccion",value:s.costo_produccion,onChange:d,required:!0}),e.jsxs(f,{className:"mt-2",label:"Responsable",name:"responsable_id",value:s.responsable_id,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione responsable"}),y.map(a=>e.jsx("option",{value:a.id,children:a.nombre_empleado},a.id))]})]}),e.jsxs(Z,{children:[e.jsx(j,{color:"secondary",onClick:()=>l(!1),children:"Cancelar"}),e.jsx(j,{color:"primary",type:"submit",children:"Guardar"})]})]})]})]})};export{be as default};
