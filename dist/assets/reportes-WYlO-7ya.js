import{a as n,_ as M,R as I,b as E,c as V,P as k,j as e}from"./index-DSdF_8M_.js";import{C as A,a as W}from"./CCardBody-BViMqAMN.js";import{C as q}from"./CCardHeader-CHF9S75-.js";import{a as _}from"./CButton-BjMrz52_.js";import{d as H,a as f,C as J}from"./CFormInput-2li5QlXf.js";import{C as G}from"./CFormSelect-D_w2R_Sd.js";import{C as K,a as w}from"./CInputGroupText-DS5TEAvR.js";import{C as O,a as Q,b as R,c as u,d as U,e as p}from"./CTable-Dgqh94m4.js";import{C as z}from"./cil-people-krF7It8S.js";import{C as X,a as Y,b as Z,c as $}from"./CModalHeader-DDDsM_3D.js";import"./DefaultLayout-CeamR_9I.js";import"./index.esm-C4RaOWCk.js";var T=n.forwardRef(function(a,x){var m=a.children,y=a.className,F=a.feedback,l=a.feedbackInvalid,o=a.feedbackValid,g=a.floatingClassName,d=a.floatingLabel,h=a.id,s=a.invalid,C=a.label,i=a.plainText,j=a.text,c=a.tooltipFeedback,b=a.valid,t=M(a,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return I.createElement(H,{describedby:t["aria-describedby"],feedback:F,feedbackInvalid:l,feedbackValid:o,floatingClassName:g,floatingLabel:d,id:h,invalid:s,label:C,text:j,tooltipFeedback:c,valid:b},I.createElement("textarea",E({className:V(i?"form-control-plaintext":"form-control",{"is-invalid":s,"is-valid":b},y),id:h},t,{ref:x}),m))});T.propTypes=E({className:k.string,id:k.string,plainText:k.bool},H.propTypes);T.displayName="CFormTextarea";const ee=[{id:1,nombre_empleado:"Juan Pérez"},{id:2,nombre_empleado:"Ana Gómez"}],re=[{id:1,nombre_reporte:"Reporte de Ventas Mensuales",fecha_generacion:"2025-07-01 10:00",contenido_reporte:"Resumen de ventas de junio...",generado_por:1,nombre_personal:"Juan Pérez"},{id:2,nombre_reporte:"Reporte de Compras",fecha_generacion:"2025-07-05 15:30",contenido_reporte:"Resumen de compras de julio...",generado_por:2,nombre_personal:"Ana Gómez"}],be=()=>{const[a,x]=n.useState([]),[m,y]=n.useState([]),[F,l]=n.useState(!1),[o,g]=n.useState({nombre_reporte:"",fecha_generacion:"",contenido_reporte:"",generado_por:""}),[d,h]=n.useState(""),[s,C]=n.useState(""),[i,j]=n.useState(""),[c,b]=n.useState("");n.useEffect(()=>{x(re),y(ee)},[]);const t=r=>{g({...o,[r.target.name]:r.target.value})},P=r=>{r.preventDefault();const v=m.find(N=>N.id===parseInt(o.generado_por));x([...a,{id:a.length+1,...o,generado_por:parseInt(o.generado_por),nombre_personal:v?v.nombre_empleado:""}]),l(!1),g({nombre_reporte:"",fecha_generacion:"",contenido_reporte:"",generado_por:""})},S=a.filter(r=>{const v=d?r.nombre_reporte.toLowerCase().includes(d.toLowerCase()):!0,N=s?r.generado_por===parseInt(s):!0,B=r.fecha_generacion.slice(0,10),D=i?B>=i:!0,L=c?B<=c:!0;return v&&N&&D&&L});return e.jsxs(A,{style:{background:"linear-gradient(135deg, #E6EBE0 60%, #F4F1BB 100%)",border:"none",boxShadow:"0 2px 16px 0 #ED6A5A33"},children:[e.jsxs(q,{className:"d-flex justify-content-between align-items-center",style:{background:"#36C9C6",color:"#fff"},children:[e.jsx("h5",{className:"mb-0",style:{letterSpacing:1},children:"Reportes"}),e.jsx(_,{color:"light",style:{color:"#36C9C6",fontWeight:"bold"},onClick:()=>l(!0),children:"+ Nuevo Reporte"})]}),e.jsxs(W,{children:[e.jsxs("div",{className:"mb-4 d-flex flex-wrap gap-3 align-items-end",style:{background:"#F4F1BB",borderRadius:8,padding:16},children:[e.jsx(f,{size:"sm",style:{maxWidth:220},label:"Nombre",placeholder:"Buscar por nombre",value:d,onChange:r=>h(r.target.value)}),e.jsxs(G,{size:"sm",style:{maxWidth:180},label:"Generado por",value:s,onChange:r=>C(r.target.value),children:[e.jsx("option",{value:"",children:"Todo el personal"}),m.map(r=>e.jsx("option",{value:r.id,children:r.nombre_empleado},r.id))]}),e.jsxs(K,{size:"sm",style:{maxWidth:320},children:[e.jsx(w,{children:"Desde"}),e.jsx(f,{type:"date",value:i,onChange:r=>j(r.target.value)}),e.jsx(w,{children:"Hasta"}),e.jsx(f,{type:"date",value:c,onChange:r=>b(r.target.value)})]}),(d||s||i||c)&&e.jsx(_,{color:"secondary",size:"sm",variant:"outline",onClick:()=>{h(""),C(""),j(""),b("")},children:"Limpiar filtros"})]}),e.jsxs(O,{hover:!0,responsive:!0,bordered:!0,align:"middle",className:"shadow-sm",style:{background:"#fff",borderRadius:8},children:[e.jsx(Q,{color:"light",children:e.jsxs(R,{children:[e.jsx(u,{children:"#"}),e.jsx(u,{children:"Nombre"}),e.jsx(u,{children:"Fecha Generación"}),e.jsx(u,{children:"Contenido"}),e.jsx(u,{children:"Generado por"})]})}),e.jsxs(U,{children:[S.length===0&&e.jsx(R,{children:e.jsx(p,{colSpan:5,className:"text-center text-muted",children:"No hay reportes registrados con los filtros seleccionados."})}),S.map(r=>e.jsxs(R,{children:[e.jsx(p,{children:r.id}),e.jsx(p,{children:e.jsx(z,{color:"info",style:{fontSize:13,background:"#36C9C6",color:"#fff"},children:r.nombre_reporte})}),e.jsx(p,{children:e.jsx("span",{style:{fontFamily:"monospace",color:"#6c757d"},children:r.fecha_generacion})}),e.jsx(p,{children:e.jsx("span",{style:{color:"#222"},children:r.contenido_reporte.length>60?r.contenido_reporte.slice(0,60)+"...":r.contenido_reporte})}),e.jsx(p,{children:e.jsx(z,{color:"secondary",children:r.nombre_personal})})]},r.id))]})]})]}),e.jsxs(X,{visible:F,onClose:()=>l(!1),children:[e.jsx(Y,{style:{background:"#36C9C6",color:"#fff"},children:e.jsx("strong",{children:"Nuevo Reporte"})}),e.jsxs(J,{onSubmit:P,children:[e.jsxs(Z,{children:[e.jsx(f,{label:"Nombre del reporte",name:"nombre_reporte",value:o.nombre_reporte,onChange:t,required:!0}),e.jsx(f,{className:"mt-2",type:"datetime-local",label:"Fecha de generación",name:"fecha_generacion",value:o.fecha_generacion,onChange:t,required:!0}),e.jsx(T,{className:"mt-2",label:"Contenido del reporte",name:"contenido_reporte",value:o.contenido_reporte,onChange:t,rows:4,required:!0}),e.jsxs(G,{className:"mt-2",label:"Generado por",name:"generado_por",value:o.generado_por,onChange:t,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione personal"}),m.map(r=>e.jsx("option",{value:r.id,children:r.nombre_empleado},r.id))]})]}),e.jsxs($,{children:[e.jsx(_,{color:"secondary",onClick:()=>l(!1),children:"Cancelar"}),e.jsx(_,{color:"primary",type:"submit",children:"Guardar"})]})]})]})]})};export{be as default};
